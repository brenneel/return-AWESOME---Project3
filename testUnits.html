<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
        <title>Tests for unit conversions</title>
        <script src="src/units.js"></script>
    </head> 

    <body>
        <h2>Testing suite</h2>
        <input type = "button" id = "energy" value = "Energy Testing" onclick  ="testAll(-10000, 10000, 782.83);">
        <input type = "button" id = "pressure" value = "Pressure Testing" onclick = "testAllPressure();">
        <input type = "button" id = "reset" value = "Clear Console" onclick = "console.clear();">
        <script>

            let unit = new Units();
            function testingErgtoJ(min, max, increment)
            {
                console.log("Testing erg to Joule");
                for (let i = min; i< max; i= i+increment)
                {
                    //console.log("erg = " + i + " joule = " + unit.ergToJ(i) + "\n");
                    let expected = i/10000000;
                    //console.log("Expected value = " + expected + " TEST ");
                    let calc = unit.ergToJ(i);
                    let flag = false;
                    if (calc !== expected)
                    {
                        //console.log(" PASSED\n");
                        flag = true;
                    }
                    if (flag)
                    {
                        console.log("erg = " + i + " joule = " + calc+ "\n");
                        console.log("Expected value = " + expected + " TEST FAILED difference between expected value and computation was ");
                        console.log(calc-expected + "\n");
                    }
                }
            };

            function testingJtoErg(min, max, increment)
            {
                console.log("Testing Joule to erg");
                for (i = min; i< max; i= i+increment)
                {
                    //console.log("erg = " + i + " joule = " + unit.ergToJ(i) + "\n");
                    let expected = i*10000000;
                    //console.log("Expected value = " + expected + " TEST ");
                    let calc = unit.jouleToErg(i);
                    flag = false;
                    if (calc !== expected)
                    {
                        //console.log(" PASSED\n");
                        flag = true;
                        
                    }
                    if (flag)
                    {
                        console.log("joule = " + i + " erg = " + calc + "\n");
                        console.log("Expected value = " + expected + " TEST FAILED difference between expected value and computation was ");
                        console.log(calc-expected + "\n");
                    }
                }
            };

            function testingJtoBtu(min, max, increment)
            {
                console.log("Testing joule to btu")
                for (i = min; i< max; i= i+increment)
                {
                    //console.log("erg = " + i + " joule = " + unit.ergToJ(i) + "\n");
                    expected = i *0.000947817;
                    //console.log("Expected value = " + expected + " TEST ");
                    let calc = unit.jouleToBtu(i);
                    flag = false;
                    if (calc !== expected)
                    {
                        //console.log(" PASSED\n");
                        flag = true;
                        
                    }
                    if (flag)
                    {
                        console.log("joule = " + i + " btu = " + calc + "\n");
                        console.log("Expected value = " + expected + " TEST FAILED difference between expected value and computation was ");
                        console.log(calc-expected + "\n");
                    }
                }
            };

            function testingBtutoJ(min, max, increment)
            {
                console.log("Testing btu to J")
                for (i = min; i< max; i= i+increment)
                {
                    //console.log("erg = " + i + " joule = " + unit.ergToJ(i) + "\n");
                    expected = i *1055.05585262;
                    //console.log("Expected value = " + expected + " TEST ");
                    let calc = unit.btuToJ(i);
                    flag = false;
                    if (calc !== expected)
                    {
                        //console.log(" PASSED\n");
                        flag = true;
                        
                    }
                    if (flag)
                    {
                        console.log("btu = " + i + " joule = " + calc + "\n");
                        console.log("Expected value = " + expected + " TEST FAILED difference between expected value and computation was ");
                        console.log(calc-expected + "\n");
                    }
                }
            };

            function testingJtoCal(min, max, increment)
            {
                console.log("Testing joule to Cal")
                for (i = min; i< max; i= i+increment)
                {
                    //console.log("erg = " + i + " joule = " + unit.ergToJ(i) + "\n");
                    expected = i *0.239006;
                    //console.log("Expected value = " + expected + " TEST ");
                    let calc = unit.jouleToCal(i);
                    flag = false;
                    if (calc !== expected)
                    {
                        //console.log(" PASSED\n");
                        flag = true;
                        
                    }
                    if (flag)
                    {
                        console.log("joule = " + i + " cal = " + calc + "\n");
                        console.log("Expected value = " + expected + " TEST FAILED difference between expected value and computation was ");
                        console.log(calc-expected + "\n");
                    }
                }
            };

            function testingCaltoJ(min, max, increment)
            {
                console.log("Testing cal to joule")
                for (i = min; i< max; i= i+increment)
                {
                    //console.log("erg = " + i + " joule = " + unit.ergToJ(i) + "\n");
                    expected = i *4.184;
                    //console.log("Expected value = " + expected + " TEST ");
                    let calc = unit.calToJ(i);
                    flag = false;
                    if (calc !== expected)
                    {
                        //console.log(" PASSED\n");
                        flag = true;
                        
                    }
                    if (flag)
                    {
                        console.log("cal = " + i + " joule = " + calc + "\n");
                        console.log("Expected value = " + expected + " TEST FAILED difference between expected value and computation was ");
                        console.log(calc-expected + "\n");
                    }
                }
            };

            function testingJtoEV(min, max, increment)
            {
                console.log("Testing joule to eV")
                for (i = min; i< max; i= i+increment)
                {
                    //console.log("erg = " + i + " joule = " + unit.ergToJ(i) + "\n");
                    expected = i *(6.241509* (10**18));
                    //console.log("Expected value = " + expected + " TEST ");
                    let calc = unit.jouleToEV(i);
                    flag = false;
                    if (calc !== expected)
                    {
                        //console.log(" PASSED\n");
                        flag = true;
                        
                    }
                    if (flag)
                    {
                        console.log("cal = " + i + " joule = " + calc + "\n");
                        console.log("Expected value = " + expected + " TEST FAILED difference between expected value and computation was ");
                        console.log(calc-expected + "\n");
                    }
                }
            };

            function testingEVtoJ(min, max, increment)
            {
                console.log("Testing EV to J")
                for (i = min; i< max; i= i+increment)
                {
                    //console.log("erg = " + i + " joule = " + unit.ergToJ(i) + "\n");
                    expected = i *(6.241509* (10**18));
                    //console.log("Expected value = " + expected + " TEST ");
                    let calc = unit.eVtoJ(i);
                    flag = false;
                    if (calc !== expected)
                    {
                        //console.log(" PASSED\n");
                        flag = true;
                        
                    }
                    if (flag)
                    {
                        console.log("cal = " + i + " joule = " + calc + "\n");
                        console.log("Expected value = " + expected + " TEST FAILED difference between expected value and computation was ");
                        console.log(calc-expected + "\n");
                    }
                }
            }
            
            function testAll(min, max, increment)
            {
               // let unit = new Units();
                
                testingErgtoJ(min, max, increment);
                testingJtoErg(min, max, increment);
                testingJtoBtu(min, max, increment);
                testingBtutoJ(min, max, increment);
                testingJtoCal(min, max, increment);
                testingJtoEV(min, max, increment);

            




            }

            //testAll(-10000, 10000, 782.83);
            

        </script>

<script>
    let testValues = [0.000000001234, 1024.123456, 987654];
    let expectedValues = [];
    let tolerance = 0.0000001;
    //expected values are taken from unitconverters.net/pressure-converter.html
    /**
     * calls all testing functions for pressure
     */
    function testAllPressure(){
       
        testingAtmoTokPa();
        testingkPaToAtmo();
        testingAtmoToPa();
        testingPaToAtmo();

    }
    
    /**
     * checks unit conversions with expected values for atmo to kPa
     */
    function testingAtmoTokPa(){
        let passed = true;
        expectedValues.push([0.00000012503505,103769.30918,100074041.55]);
        for(let i = 0; i<testValues.length; i++){
            let calc = unit.atmoTokPa(testValues[i]);
            
            
            if(Math.abs((calc-expectedValues[0][i])/(expectedValues[0][i]*100) >1)) {
                passed = false;
                console.log("Expected value = " + expectedValues[0][i] + " TEST FAILED difference between expected value and computation was ");
                console.log(calc-expectedValues[0][i] + "\n");
            }
        }
        if(passed){
            console.log("atmo to kPa: PASSED");
        }
    }
    /**
     * checks unit conversions with expected values for kPa to atmo
     */
     function testingkPaToAtmo(){
        let passed = true;
        expectedValues.push([0.000000001233999999,10.107312667,9747.3871207]);
        for(let i = 0; i<testValues.length; i++){
            let calc = unit.kPaToAtmo(testValues[i]);

           
            if(Math.abs((calc-expectedValues[1][i])/(expectedValues[1][i]*100) >1)){
                passed = false;
                console.log("Expected value = " + expectedValues[1][i] + " TEST FAILED difference between expected value and computation was ");
                console.log(calc-expectedValues[1][i] + "\n");
            }
        }
        if(passed){
            console.log("kPa to atmo: PASSED");
        }
    }

    /**
     * atmo to Pa checking with expected values
     */
     function testingAtmoToPa(){
        let passed = true;
        expectedValues.push([0.0001250351,103769309.18,100074041550])
        for(let i = 0; i<testValues.length; i++){
            let calc = unit.atmoToPa(testValues[i]);
            
            
            if(Math.abs((calc-expectedValues[2][i])/(expectedValues[2][i]*100) >1)){
                passed = false;
                console.log("Expected value = " + expectedValues[2][i] + " TEST FAILED difference between expected value and computation was ");
                console.log(calc-expectedValues[2][i] + "\n");
            }
        }
        if(passed){
            console.log("atmo to Pa: PASSED");
        }
    }
    /**
     * atmo to Pa checking with expected values
     */
     function testingPaToAtmo(){
        let passed = true;
        expectedValues.push([0.00000000000001217863311,0.0101073127,9.7473871207])
        for(let i = 0; i<testValues.length; i++){
            let calc = unit.paToAtmo(testValues[i]);

            if(Math.abs((calc-expectedValues[0][i])/(expectedValues[0][i]*100) >1)){
                passed = false;
                console.log("Expected value = " + expectedValues[3][i] + " TEST FAILED difference between expected value and computation was ");
                console.log(calc-expectedValues[3][i] + "\n");
            }
        }
        if(passed){
            console.log("Pa to atmo: PASSED");
        }
    }


        </script>
    </body>

</html>